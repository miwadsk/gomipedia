<!DOCTYPE html>
<html lang="ja">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet"  href="css/sanitize.css">
<link rel="stylesheet"  href="css/typography.css">
<link rel="stylesheet"  href="css/style.css">
<script src="js/vue.js"></script>
<script>
  let vh = window.innerHeight * 0.01; 
  document.documentElement.style.setProperty('--vh', `${vh}px`); 
  window.addEventListener('resize', () => { 
    vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`); 
  }); 
</script>
<title>Gomipedia</title>

<div id="app" v-cloak>

<main>
  <div class="title-box">
    <h1 class="title">GOMIPEDIA</h1>
    <div class="municipal">{{cityName}}版</div>
  </div>
  <input class="keyword-input" :placeholder="placeholder" v-model="keyword">
  <ul class="list article-list">
    <list-item-article
      v-for="article in appearedArticles"
      ref="article"
      :key="article.id"
      :article="article"
      :category="categories[article.category]"
      :click="articleClicked"
      :highlighter="getKeywordHighlighted">
    </list-item-article>
  </ul>
  <ul class="list legend-list">
    <list-item-legend
      v-for="key in Object.keys(categories)"
      :key="key"
      :category="categories[key]">
    </list-item-legend>
  </ul>
  <div>
</main>

<transition name="popup">
  <div class="popup-fill" v-if="selectedArticle" @click="closePopup">
    <div class="popup-window" tabindex="0" ref="popupWindow" @click="dummy" @keydown="popupKeydown">
      <div class="popup-pager-box">
        <div class="popup-prev" @click="moveArticleSelection(-1)">&lt;</div>
        <div class="popup-next" @click="moveArticleSelection(+1)">&gt;</div>
      </div>
      <div class="popup-close-box" @click="closePopup">
        <div class="popup-close">✖</div>
      </div>
      <div class="popup-content-box">
        <div class="popup-title"><strong>{{selectedArticle.name}}</strong> は</div>
        <img class="popup-category-icon" :src="categories[selectedArticle.category].image"/>
        <div class="popup-category-text"><strong>{{categories[selectedArticle.category].name}}</strong> です。</div>
        <img class="popup-note-icon" src="img/note.png" v-if="selectedArticle.note"/>
        <div class="popup-note-text" v-if="selectedArticle.note">{{selectedArticle.note}}</div>
      </div>
    </div>
  </div>
</transition>

</div>

<script src="js/main.js"></script>
